# BnuAutoLogin开发文档

## 功能开发任务需求书

### 概述

BnuAutoLogin是一个在北师大里面自动登录校园网的脚本程序,能够在Linux、MacOs和Windows平台下使用

### 功能需求设计

默认情况下,脚本将会提供命令行界面进行操作,提供下面列出的功能菜单

1. 登录
   1. 已配置的用户
   2. 使用自己的账号密码登录
2. 登出
3. 配置
   1. 用户配置
      1. 用户列表
         1. 用户名
         2. ~登录状态~
      2. 添加用户
         1. 用户名
         2. 账号
         3. 密码
      3. 删除用户
   2. 网络配置
      1. 自动重连(防断网)
      2. 定时登出
4. 退出脚本

下面会对每个功能进行详细说明

#### 登录功能

进入登录功能后,如果配置过用户,则会提供用户列表供其选择,但是也提供使用账号密码登录的选项

#### 登出

注销当前登录的用户

#### 配置

配置分为用户配置和网络配置

**用户配置:**

在该菜单下,提供了两个选项

- 选项1,用户列表: 可以看到用户配置过的所有登录信息,其中只有用户名字段可见,选择以后可以决定是否删除
- 选项2,添加用户: 可以新增新的用户配置,每个新用户配置包含以下信息,用户名、账号、密码,添加时会进行上网有效性验证,验证失败则添加失败

#### 网络配置

网络连接有两个功能,都非常容易理解,第一个就是自动重连防止断网掉线,用户可以选择是否开启,第二个就是定时登出,用户可以配置多长时间后登出

#### 退出脚本

默认按键盘上Q键将会退出脚本

#### 关于警告、错误和正确的提示信息

正确的提示信息显示为绿色,警告的为黄色,错误的为红色

### 针对Windows平台的设计

在Windows平台下,我们将会提供可执行的客户端程序,来可视化命令行界面的功能,下面对实现细节进一步说明

#### 界面设计

**登录界面**

<img src="登录界面.png" width = "60%" />

**配置界面**

<img src="配置.png" width = "60%" />

注册账号对应添加账号,配置对应上面功能需求逻辑

### 技术栈

后端:

- requests
  - 解决核心联网问题
- Flask
  - 为前端可视化提供支撑
- pywebview[cef]
  - 客户端化Flask
- pyinstaller
  - 打包Python程序

数据库:

- sqlite3
  - 存储登录状态,用户数据

前端:

- vue
- bootstrap
- typescript

### 项目协作

项目Git仓库ssh地址: git@github.com:Easy318/BnuAutoLogin.git

项目一共有两个分支: master和dev

- master分支,合并到master分支上的代码都是经过测试，没有问题，可以发布到线上环境的代码,你们不能够合并,最有由我来合并发布
- dev分支,用于合并项目所有成员最新的开发代码的分支，上面可能会存在bug,是我们大家主要的工作分支

**工作流:**

首先把项目clone到本地,然后创建本关联开发分支,具体操作如下

```shell
# step1 把远程仓库的数据在本地进行更新
git fetch origin
# step2 创建一个新分支，并且把远程的origin/新分支和本地的新分支进行关联
git checkout -b 新分支 origin/新分支
# step3 将该远程分支和本地分支合并
git merge origin/新分支
```

开发具体功能的时候新建**特征**分支来针对具体功能的开发,开发并测试完没问题以后再合并到dev分支,比如我现在和前端一起开发一个登录的功能，那我就可以创建一个登录的分支和前端开发一起协作